FROM node:18.12.1-bullseye-slim

RUN mkdir -p /usr/src/app

WORKDIR /usr/src/app

RUN corepack enable

RUN corepack prepare pnpm@7.16.1

RUN apt update

RUN apt install openssl -y

COPY . ./

RUN pnpm install

RUN pnpm run build

CMD ["pnpm", "run", "start"]